val aName = "Master Bathroom Motion"
rule "Master Bathroom Motion ON"
when
	Item MasterBathroomMotionSensor received update ON or
	Item MasterBathroomShowerMotionSensor received update ON
then
	logWarn("Bigboxer23", aName  + " Triggered " + MasterBathMain.state + " " + MasterBathroomMotionTimer.state)
        if (MasterBathMain.state == 0){
            logWarn("Bigboxer23", aName + " triggering lights")
            SmartMasterBathroom.sendCommand(100)
        }
        MasterBathroomMotionTimer.sendCommand(OFF)
end

rule "Master Bathroom Motion OFF"
when
    Item MasterBathroomMotionSensor received update OFF or
    Item MasterBathroomShowerMotionSensor received update OFF
then
 	logWarn("Bigboxer23", aName + " sensor off. " + MasterBathroomMotionSensor.state + " " + MasterBathroomShowerMotionSensor.state)
	if (MasterBathroomMotionSensor.state === OFF && MasterBathroomShowerMotionSensor.state === OFF){
    	logWarn("Bigboxer23", aName + " sensor Off, setting timer")
	    MasterBathroomMotionTimer.sendCommand(ON)
	}
end

rule "Master Bathroom Timer OFF"
when
    Item MasterBathroomMotionTimer received update OFF
then
 	logWarn("Bigboxer23", aName + " timer expired. " + MasterBathroomMotionSensor.state + " " + MasterBathroomShowerMotionSensor.state)
	if (MasterBathroomMotionSensor.state === OFF && MasterBathroomShowerMotionSensor.state === OFF){
		logWarn("Bigboxer23", aName + " Off, Sensor Off, shutting off lights")
        SmartMasterBathroom.sendCommand(OFF)
    }
end