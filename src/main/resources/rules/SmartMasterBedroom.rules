rule "Smart Master Bedroom Rule"
when
	Item SmartMasterBedroom received command
then
	logWarn("Bigboxer23", "Smart Master Bedroom: " + receivedCommand + " " + now.getHourOfDay + " " + MattsBedside.state + " " + MasterBedroomFan.state)
	if (receivedCommand == OFF || receivedCommand == 0)
	{
		if (MasterBedroomFan.state == OFF)
		{
			MattsBedside.sendCommand(25)
            MaureensBedside.sendCommand(25)
		} else
		{
			MattsBedside.sendCommand(receivedCommand)
            MaureensBedside.sendCommand(receivedCommand)
		}
        MasterBedroomOverhead.sendCommand(receivedCommand)
        Hallway.sendCommand(receivedCommand)
        MasterCloset.sendCommand(receivedCommand)
        MainAccent.sendCommand(receivedCommand)
		if (now.getHourOfDay >= 7 && now.getHourOfDay < 21)
        {
            MasterBedroomFan.sendCommand(receivedCommand)
        } else
        {
            MasterBedroomFan.sendCommand(ON)
        }
	} else
	{
		var aCommand = receivedCommand;
		if (aCommand == ON)
		{
			aCommand = 100;
		}
		if (now.getHourOfDay < 7 && now.getHourOfDay >= 21)
		{
			aCommand = 25;
			MasterBedroomFan.sendCommand(ON)
		} else
		{
			MasterBedroomOverhead.sendCommand(aCommand)
		}
		MattsBedside.sendCommand(aCommand)
		MaureensBedside.sendCommand(aCommand)
	}
end