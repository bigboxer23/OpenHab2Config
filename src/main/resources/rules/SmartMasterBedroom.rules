rule "Smart Master Bedroom Rule"
when
	Item SmartMasterBedroom received command
then
	logWarn("Bigboxer23", "Smart Master Bedroom: " + receivedCommand + " " + now.getHourOfDay + " " + MattsBedside.state)
	if (receivedCommand == OFF || receivedCommand == 0)
	{
		MattsBedside.sendCommand(receivedCommand)
        MaureensBedside.sendCommand(receivedCommand)
        MasterBedroomOverhead.sendCommand(receivedCommand)
        Hallway.sendCommand(receivedCommand)
        MasterCloset.sendCommand(receivedCommand)
        MainAccent.sendCommand(receivedCommand)
		if (now.getHourOfDay >= 7 && now.getHourOfDay < 21)
        {
            MasterBedroomFan.sendCommand(receivedCommand)
        } else
        {
            MasterBedroomFan.sendCommand(ON)
        }
	} else
	{
		if (now.getHourOfDay >= 7 && now.getHourOfDay < 21)
		{
			var aCommand = receivedCommand;
			if (receivedCommand == ON)
			{
				aCommand = 100;
			}
			MattsBedside.sendCommand(aCommand)
            MaureensBedside.sendCommand(aCommand)
            MasterBedroomOverhead.sendCommand(aCommand)
		} else
		{
			var aCommand = 25;
            if (SmartMasterBedroom.state != 100)
            {
                aCommand = SmartMasterBedroom.state;
            }
            MattsBedside.sendCommand(aCommand)
            MaureensBedside.sendCommand(aCommand)
            MasterBedroomFan.sendCommand(ON)
		}
	}
end